@page
@model OluRankings.Pages.Admin.Rankings.IndexModel
@{
    ViewData["Title"] = "Manage Rankings";
}
<h1>Manage Rankings</h1>

@if (TempData["Msg"] is string m) { <div class="alert success">@m</div> }

<p><a class="btn btn-success" asp-page="/Admin/Rankings/Create">Create Ranking</a></p>

<table class="table">
  <thead>
    <tr>
      <th>Age Group</th><th>Sport</th><th>Period</th><th>Published</th><th>Entries</th><th></th>
    </tr>
  </thead>
  <tbody>
  @foreach (var r in Model.Items)
  {
      <tr>
        <td>@r.AgeGroup</td>
        <td>@r.Sport</td>
        <td>@r.Period</td>
        <td>@(r.PublishedAt == default ? "-" : r.PublishedAt.ToString("yyyy-MM-dd"))</td>
        <td>@(r.Entries?.Count ?? 0)</td>
        <td>
          <a class="btn btn-sm btn-primary" asp-page="/Admin/Rankings/Edit" asp-route-id="@r.Id">Edit Order</a>
        </td>
      </tr>
  }
  </tbody>
</table>
<p class="mt-3"><a class="btn btn-success" asp-page="/Admin/Rankings/Create">Create Ranking</a></p>

